#### 文字溢出处理

```txt
// css样式
white-space: nowrap;                  文字不允许换行（单行文本）

overflow: hidden;                     溢出部分隐藏

text-overflow: ellipsis;              文本溢出后，使用 ... 代替
```

#### 处理搜索历史

```txt
const set = new Set(this.historyList)          将 Array 数组转化为 Set 对象

set.delete(this.kw)                            调用 Set 对象的delete 方法，移除对应的元素

set.add(this.kw)                               调用 Set 对象的 add 方法，向 Set 中添加元素

this.historyList = Array.from(set)             将 Set 对象转化为 Array 数组

// 调用 uni.setStorageSync(key, value) 将搜索历史记录持久化存储到本地
uni.setStorageSync('kw', JSON.stringify(this.historyList))
```

```javascript
// 页面加载完成获取本地存储数据
onLoad() {
    this.historyList = JSON.parse(uni.getStorageSync('kw') || '[]')
}
```

```javascript
//点击删除记录 事件
removeHistoryList() {
    this.historyList = []
    uni.setStorageSync('kw', '[]')       // 本地储存清空
}
```

#### 处理图片底部空白空隙

```javascript
// 使用字符串的 replace() 方法，为 img 标签添加行内的 style 样式，从而解决图片底部空白间隙的问题
data.introduce = data.introduce.replace(/<img /g, '<img style="display:block;" ')
```

#### 解决 uni-number-box 组件 数据不合法的问题

!> 问题说明：当用户在 NumberBox 中输入字母等非法字符之后，会导致 NumberBox 数据紊乱的问题

```javascript
//1. 打开根目录中 uni-modules/.../uni-number-box.vue 组件, 修改 methods 节点中的 _onBlur 函数如下：

_onBlur(event) {
  // 官方的代码没有进行数值转换，用户输入的 value 值可能是非法字符：
  // let value = event.detail.value;

  // 将用户输入的内容转化为整数
  let value = parseInt(event.detail.value);

  if (!value) {
    // 如果转化之后的结果为 NaN，则给定默认值为 1
    this.inputValue = 1;
    return;
  }

  // 省略其它代码...
}
```

#### 完善 uni-number-box 组件的 inputValue 侦听器

!> 问题说明：在用户每次输入内容之后，都会触发 inputValue 侦听器，从而调用 this.$emit("change", newVal) 方法。这种做法可能会把不合法的内容传递出去!

```javascript
//1. 打开根目录中 uni-modules/.../uni-number-box.vue 组件, 修改 watch 节点中的 inputValue 侦听器如下:

inputValue(newVal, oldVal) {
  // 官方提供的 if 判断条件，在用户每次输入内容时，都会调用 this.$emit("change", newVal)
  // if (+newVal !== +oldVal) {


  // 新旧内容不同 && 新值内容合法 && 新值中不包含小数点
  if (+newVal !== +oldVal && Number(newVal) && String(newVal).indexOf('.') === -1) {
    this.$emit("change", newVal);
  }
}
```

#### uni-swipe-action 滑块组件中 onClick 事件执行两次解决方法

[解决方法](https://blog.csdn.net/hongyu799/article/details/116275123)

```txt
<uni-swipe-action>
  <!-- 基础用法 -->
  <uni-swipe-action-item :right-options="options" @click="onClick">
    <view>基础使用</view>
  </uni-swipe-action-item>
</uni-swipe-action>
```

#### 解决收货地址授权失败的问题

```javascript
// 调用此方法，重新发起收货地址的授权
async reAuth() {

  // 3.1 提示用户对地址进行授权
  const [err2, confirmResult] = await uni.showModal({
    content: '检测到您没打开地址权限，是否去设置打开？',
    confirmText: "确认",
    cancelText: "取消",
  })

  // 3.2 如果弹框异常，则直接退出
  if (err2) return

  // 3.3 如果用户点击了 “取消” 按钮，则提示用户 “您取消了地址授权！”
  if (confirmResult.cancel) return uni.$showMsg('您取消了地址授权！')

  // 3.4 如果用户点击了 “确认” 按钮，则调用 uni.openSetting() 方法进入授权页面，让用户重新进行授权
  if (confirmResult.confirm) return uni.openSetting({

    // 3.4.1 授权结束，需要对授权的结果做进一步判断
    success: (settingResult) => {

      // 3.4.2 地址授权的值等于 true，提示用户 “授权成功”   showMsg()为自己封装的提示方法
      if (settingResult.authSetting['scope.address']) return uni.$showMsg('授权成功！请选择地址')

      // 3.4.3 地址授权的值等于 false，提示用户 “您取消了地址授权”
      if (!settingResult.authSetting['scope.address']) return uni.$showMsg('您取消了地址授权！')
    }
  })
}
```

#### 点击登录按钮获取微信用户的基本信息

```txt
<!-- 可以从 @getuserinfo 事件处理函数的形参中，获取到用户的基本信息 -->

<button type="primary"
        class="btn-login"
        open-type="getUserInfo"
        @getuserinfo="getUserInfo"
>
一键登录
</button>
```

```javascript
// 获取微信用户的基本信息
getUserInfo(e) {
  // 判断是否获取用户信息成功
  if (e.detail.errMsg === 'getUserInfo:fail auth deny') return uni.$showMsg('您取消了登录授权！')

  // e.detail.userInfo 就是用户的基本信息
  console.log(e.detail.userInfo)
}
```
